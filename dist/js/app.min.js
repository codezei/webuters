/******/ (function() { // webpackBootstrap
/******/ 	"use strict";
var __webpack_exports__ = {};
document.addEventListener('DOMContentLoaded', function () {
  // Custom JS
  stickyHeader();
  mobMenuToggle();
  accordion('.accordion-item-js', {
    closeItem: false
  });
  videoPopup();
  switchPrice();
});
window.addEventListener('load', function () {
  smoothScroll();
});
// мобильное меню
function mobMenuToggle() {
  var btn = document.querySelector('.header__navigation-btn-menu');
  var menu = document.querySelector(btn.dataset.toggle);
  var header = document.querySelector('.header');
  btn.addEventListener('click', function (e) {
    btn.classList.toggle('active');
    menu.classList.toggle('active');
    header.classList.toggle('active');
  });
}
function accordion(accordionItemSelector, mode) {
  var accordionElements = document.querySelectorAll(accordionItemSelector);
  var openedElement;
  for (var i = 0; i < accordionElements.length; i++) {
    if (accordionElements[i].classList.contains('open')) {
      openedElement = accordionElements[i];
    }
    accordionElements[i].addEventListener('click', function (e) {
      if (mode.closeItem) {
        if (openedElement && openedElement !== e.currentTarget) {
          openedElement.classList.remove('open');
        }
        openedElement = e.currentTarget;
        if (openedElement.classList.contains('open') && e.target.classList.contains(mode.closeTarget)) {
          openedElement.classList.remove('open');
        } else {
          openedElement.classList.add('open');
        }
      } else {
        if (openedElement) {
          openedElement.classList.remove('open');
        }
        openedElement = e.currentTarget;
        openedElement.classList.add('open');
      }
    });
  }
}
function stickyHeader() {
  var header = document.querySelector('.header');
  if (document.body.getBoundingClientRect().top < 0) {
    header.classList.add('sticky');
  } else {
    header.classList.remove('sticky');
  }
  document.addEventListener('scroll', function () {
    if (document.body.getBoundingClientRect().top < 0) {
      header.classList.add('sticky');
    } else {
      header.classList.remove('sticky');
    }
  });
}
function videoPopup() {
  var btn = document.querySelector('a[href*="www.youtube.com"]');
  if (!btn) {
    return;
  }
  var popup = document.querySelector('.popup');
  btn.addEventListener('click', function (e) {
    e.preventDefault();
    popup.classList.add('active');
  });
  btn.addEventListener('click', function (e) {
    var videoId = e.currentTarget.href.split('watch?v=').pop();
    var popupInner = popup.querySelector('.popup__inner');
    var frame = document.createElement('iframe');
    frame.classList.add('popup__frame');
    frame.src = "https://www.youtube.com/embed/" + videoId;
    frame.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
    frame.setAttribute('allowfullscreen', true);
    popupInner.appendChild(frame);
  });
  popup.addEventListener('click', function (e) {
    if (e.target === e.currentTarget || e.target.classList.contains('popup__close')) {
      popup.classList.remove('active');
      popup.querySelector('iframe').remove();
    }
  });
}
function smoothScroll() {
  var linkNav = document.querySelectorAll('[href^="#"]');
  var headerHeight = document.querySelector('.header').getBoundingClientRect().height;
  var V = 0.2;
  for (var i = 0; i < linkNav.length; i++) {
    linkNav[i].addEventListener('click', function (e) {
      //по клику на ссылку
      e.preventDefault(); //отменяем стандартное поведение
      var w = window.pageYOffset; // производим прокрутка прокрутка
      var hash = this.href.replace(/[^#]*(.*)/, '$1');
      var tar = document.querySelector(hash); // к id элемента, к которому нужно перейти
      var t = tar.getBoundingClientRect().top - headerHeight; // отступ от окна браузера до id
      var start = null;
      requestAnimationFrame(step); // подробнее про функцию анимации [developer.mozilla.org]
      function step(time) {
        if (start === null) {
          start = time;
        }
        var progress = time - start,
          r = t < 0 ? Math.max(w - progress / V, w + t) : Math.min(w + progress / V, w + t);
        window.scrollTo(0, r);
        if (r != w + t) {
          requestAnimationFrame(step);
        } else {
          location.hash = hash; // URL с хэшем
        }
      }
    }, false);
  }
}
function switchPrice() {
  var form = document.querySelector('.switch');
  if (!form) return;
  var prices = document.querySelectorAll('.js-change-price');
  form.addEventListener('change', function (e) {
    for (var i = 0; i < prices.length; i++) {
      prices[i].innerHTML = prices[i].dataset[e.target.value] + '$';
    }
  });
}
/******/ })()
;